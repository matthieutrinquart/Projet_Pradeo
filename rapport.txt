\chapter*{Projet pradeo}
\end{center}

\section{Classe DataAntivirus}
la classe DataAntivirus permet d'enregistrer les détails des resultats de chaque antivirus fournit par VirusTotal.\newline

\begin{lstlisting}
class DataAntiVirus  {
     var Nom : String =""//Nom de l'antivirus.
     var category : String =""//Contient ce que l'antivirus à détécté(undetected, type-unsupported, malicious, suspicious, etc...).
     var result : String =""//si une menace est détécté affiche qu'elle l objet du problème null aucun problème n'est détécté.
\end{lstlisting}


\section{Classe DataApplication}
la classe DataApplication permet d'enregistrer certains élément fournit par VirusTotal.\newline

\begin{lstlisting}
class DataApplication :Parcelable{
     var Nom : String =""//Nom de l'application analysé
     var score : Int = 0//résultat du nombre d antivirus qui ont détécté une menace ou une suspition .
     var total : Int = 0//résultat de l'addition du nombre d'antivirus qui ont détécté une menace, une suspition ou qui n'ont pas détécté de menace. 
     var etat : String =""//
    var  antivirus : ArrayList<DataAntiVirus> = ArrayList<DataAntiVirus>()//ArrayList contenant les détails de chaque AntiVirus
\end{lstlisting}

\section{Classe FragmentMenu}
La classe FragmentMenu s'occupe de gérer les fonctionnalités du premier fragment de l'application qui affiche le score obtenue par chaque applications du téléphone ainsi que l'état de chaque application (Clean, menace détécté ou suspition de menace).\newline
\begin{figure}[h]
\begin{center}
\includegraphics[scale=0.6]{Capture.PNG}
\caption[le titre]{FragmentMenu}
\label{monlabel}
\end{center}
\end{figure}\newline
Les Applications qui contiennent une menace sont affiché en rouge.\newline
Celles qui contiennent une suspition de menace sont affiché en orange\newline
Celles qui contiennent aucune menace sont affiché en vert\newline

Le fragment fait la liste de toutes les applications installé sur l'appareil. Effectue un hashage avec l'algorithme SHA-256 de chaqu'une des applications.Il envoie ensuite ce hash au site VirusTotal par une requête GET.Le site va retourner toutes les informations qu'il dispose sur l'application sous un format Json, le fragments va ensuite trier les informations obtenue et les afficher sur une ListView.\newline

\begin{lstlisting}
/*Cette fonctions est appelé quand on click sur un des items de la ListView pour afficher plus en détails les informations récolté sur l'application en passant du FragmentMenu au FragmentAntiVirus*/
 fun changementFragment(d :DataApplication)
\end{lstlisting}


\begin{lstlisting}
/*Cette fonctions prend en paramètre l'adresse du fichier APK d'une application. Elle lit le fichier APK et retourne le hash SHA-256 du fichier APK*/
fun hash(path : String) : String
\end{lstlisting}


\begin{lstlisting}
/*Cette fonction prend en paramètre un hash et effectue la requête Get au serveur de VirusTotal. Elle retourne ensuite le résultat obtenue*/
fun Getrequete(hash : String) : String
\end{lstlisting}

\begin{lstlisting}
/*Cette fonction prend en paramètre une ArrayList de DataApplication et va écrire sous un format Json toutes les données de toutes les aplications de l'appareil pour permettre la persistance des données (et éviter de refaire les requêtes Get au serveur VirusTotal ce qui prend du beaucoup de temps)*/
fun ecrire(context: Context , json : ArrayList<DataApplication>)
\end{lstlisting}


\begin{lstlisting}
/*Lit le fichier Json contenant les données de chaque applications de l'appareil et retourne une ArrayList de ces données*/
fun lecture(context: Context):ArrayList<DataApplication>
\end{lstlisting}

\begin{lstlisting}
/*Fonctions principal qui va lister toutes les applications de l'appareil et utilisé les fonctions précédentes pour effectuer le hash de chaque applications l'envoyé au serveur VirusTotal et écrire certaines informations du résultat retourné sur un fichier Json*/
fun getallapps(view : View)
\end{lstlisting}

A chaque chargement du fragment le programme vérifie si il existe pas déjà un fichier Json sur l'appareil contenant déjà les informations de sécurité de chaque applications pour éviter de faire des requêtes au serveur VirusTotal a chaque chargement du fragment(Pour économiser du temps).\newline
Il est quand même possible de mettre a jours les informations ces informations en appuyant sur le button "scan" qui va effectuer les requêtes au serveur de VirusTotal et remettre a jours les données écrite sur l'appareil.



\section{Classe FragmentAntiVirus}
Cette fonction affiche sur une ListView les détails de l'analyse de chaque antivirus.\newline

\begin{figure}[h]
\begin{center}
\includegraphics[scale=0.65]{Capture8.PNG}
\caption[le titre]{FragmentAntiVirus}
\label{monlabel}
\end{center}
\end{figure}\newline
la listeView affiche le nom de l'antivirus et son état (si il a détécté un virus, une supsition, rien détécté, etc...)\newline
les antivirus qui ont dététcté une menace sont affiché en rouge\newline
Ceux qui ont détécté une suspition sont affiché en orange\newline
Ceux qui n'ont pas reconnu l'application sont affiché en gris\newline
Ceux qui n'ont pas détécté  de menace sont affiché en vert\newline
Si une menace ou une suspition à été détécté par un antivirus l'application affiche le détail de la menace ou de la suspition\newline
le boutton retour permet de revenir au FragmentMenu
\begin{lstlisting}
/*Permet de revenir au FragmentMenu*/
fun changementFragment()
\end{lstlisting}

\end{document}




